<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Grouping feature groups in components — component-generation • patRoon</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<meta property="og:title" content="Grouping feature groups in components — component-generation" />

<meta property="og:description" content="Functionality to automatically group related feature groups (e.g.
isotopes, adducts and homologues) to assist and simplify compound annotation." />
<meta name="twitter:card" content="summary" />
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">patRoon</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/rickhelmus/patRoon">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Grouping feature groups in components</h1>
    </div>

    
    <p>Functionality to automatically group related feature groups (<em>e.g.</em>
isotopes, adducts and homologues) to assist and simplify compound annotation.</p>
    

    <pre class="usage"><span class='co'># S4 method for featureGroups</span>
<span class='fu'>generateComponents</span>(<span class='no'>fGroups</span>, <span class='no'>algorithm</span>, <span class='no'>...</span>)

<span class='fu'>generateComponentsCAMERA</span>(<span class='no'>fGroups</span>, <span class='no'>ionization</span>, <span class='kw'>onlyIsotopes</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>extraOpts</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)

<span class='fu'>generateComponentsNontarget</span>(<span class='no'>fGroups</span>, <span class='no'>ionization</span>, <span class='kw'>rtRange</span> <span class='kw'>=</span> <span class='fu'>c</span>(-<span class='fl'>120</span>, <span class='fl'>120</span>),
  <span class='kw'>mzRange</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>5</span>, <span class='fl'>120</span>), <span class='kw'>elements</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"C"</span>, <span class='st'>"H"</span>, <span class='st'>"O"</span>), <span class='kw'>maxRTDev</span> <span class='kw'>=</span> <span class='fl'>30</span>,
  <span class='kw'>maxMzDev</span> <span class='kw'>=</span> <span class='fl'>0.002</span>, <span class='kw'>extraOpts</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)

<span class='fu'>generateComponentsRAMClustR</span>(<span class='no'>fGroups</span>, <span class='kw'>st</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>sr</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>maxt</span> <span class='kw'>=</span> <span class='fl'>12</span>,
  <span class='kw'>hmax</span> <span class='kw'>=</span> <span class='fl'>0.3</span>, <span class='kw'>normalize</span> <span class='kw'>=</span> <span class='st'>"TIC"</span>, <span class='no'>ionization</span>, <span class='kw'>absMzDev</span> <span class='kw'>=</span> <span class='fl'>0.002</span>,
  <span class='kw'>relMzDev</span> <span class='kw'>=</span> <span class='fl'>5</span>, <span class='kw'>RCExperimentVals</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>design</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>platform</span> <span class='kw'>=</span> <span class='st'>"LC-MS"</span>),
  <span class='kw'>instrument</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>ionization</span> <span class='kw'>=</span> <span class='no'>ionization</span>, <span class='kw'>MSlevs</span> <span class='kw'>=</span> <span class='fl'>1</span>)), <span class='kw'>extraOptsRC</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>extraOptsFM</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>fGroups</th>
      <td><p><code><a href='featureGroups-class.html'>featureGroups</a></code> object for which components should
be generated.</p></td>
    </tr>
    <tr>
      <th>algorithm</th>
      <td><p>A character string describing the algorithm that should be
used: <code>"ramclustr"</code>, <code>"camera"</code>, <code>"nontarget"</code></p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Any parameters to be passed to the selected component generation
algorithm.</p></td>
    </tr>
    <tr>
      <th>ionization</th>
      <td><p>Which ionization polarity was used to generate the data:
should be <code>"positive"</code> or <code>"negative"</code>.</p></td>
    </tr>
    <tr>
      <th>onlyIsotopes</th>
      <td><p>Logical value. If <code>TRUE</code> only isotopes are
considered when generating components (faster). Corresponds to <code>quick</code>
argument of <code><a href='http://www.rdocumentation.org/packages/CAMERA/topics/annotate-methods'>CAMERA::annotate</a></code>.</p></td>
    </tr>
    <tr>
      <th>extraOpts</th>
      <td><p>Named character vector with extra arguments directly passed
to <code>homol.search</code> (<code>generateComponentsNontarget</code>) or
<code><a href='http://www.rdocumentation.org/packages/CAMERA/topics/annotate-methods'>CAMERA::annotate</a></code>
(<code>generateComponentsCAMERA</code>). Set to <code>NULL</code> to ignore.</p></td>
    </tr>
    <tr>
      <th>rtRange</th>
      <td><p>A numeric vector containing the minimum and maximum retention
time (in seconds) between homologues. Series are always considered from low
to high <em>m/z</em>, thus, a negative minimum retention time allows
detection of homologous series with increasing <em>m/z</em> and decreasing
retention times. These values set the <code>minrt</code> and <code>maxrt</code>
arguments of <code>homol.search</code>.</p></td>
    </tr>
    <tr>
      <th>mzRange</th>
      <td><p>A numeric vector specifying the minimum and maximum <em>m/z</em>
increment of a homologous series. Sets the <code>minmz</code> and <code>maxmz</code>
arguments of <code>homol.search</code>.</p></td>
    </tr>
    <tr>
      <th>elements</th>
      <td><p>A character vector with elements to be considered for
detection of repeating units. Sets the <code>elements</code> argument of
<code>homol.search</code> function.</p></td>
    </tr>
    <tr>
      <th>maxRTDev, maxMzDev</th>
      <td><p>Maximum retention and (absolute) <em>m/z</em>
deviation for detection of homologues within series. These arguments set
the <code>rttol</code> and <code>mztol</code> arguments of <code>homol.search</code>.</p></td>
    </tr>
    <tr>
      <th>st, sr, maxt, hmax, normalize</th>
      <td><p>Arguments to tune the behaviour of feature
group clustering. See their documentation from <code>ramclustR</code>.
When <code>st</code> is <code>NULL</code> it will be automatically calculated as the
half of the median for all chromatographic peak widths.</p></td>
    </tr>
    <tr>
      <th>absMzDev, relMzDev</th>
      <td><p>Maximum absolute/relative <em>m/z</em> deviation for
annotation. Passed as the <code>mzabs.error</code> and <code>ppm.error</code> arguments
to <code><a href='http://www.rdocumentation.org/packages/RAMClustR/topics/do.findmain'>do.findmain</a></code>.</p></td>
    </tr>
    <tr>
      <th>RCExperimentVals</th>
      <td><p>A named <code>list</code> containing two more <code>list</code>s:
<code>design</code> and <code>instrument</code>. These are used to construct the
<code>ExpDes</code> argument passed to <code>ramclustR</code>.</p></td>
    </tr>
    <tr>
      <th>extraOptsRC, extraOptsFM</th>
      <td><p>Named <code>list</code> with further arguments to be
passed to <code>ramclustR</code> and <code><a href='http://www.rdocumentation.org/packages/RAMClustR/topics/do.findmain'>do.findmain</a></code>.
Set to <code>NULL</code> to ignore.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code><a href='components-class.html'>components</a></code> object containing all generated
  components.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Several algorithms are provided to group feature groups that are related in
some (chemical) way to each other. These components generally include
adducts, isotopes, in-source fragments and homologues. The linking of this
data is generally useful to provide more information for compound annotation
and reduce the data size and thus complexity.
    <code>generateComponents</code> is a generic function that will generate components
  using one of the supported algorithms. The actual functionality is provided
  by algorithm specific functions such as <code>generateComponentsRAMClustR</code> and
  <code>generateComponentsNontarget</code>. While these functions may be called directly,
  <code>generateComponents</code> provides a generic interface and is therefore usually
  preferred.
    <code>generateComponentsCAMERA</code> provides an interface to
  <a href='https://bioconductor.org/packages/release/bioc/html/CAMERA.html'>CAMERA</a>
   which is used to generate components from known adducts, isotopes and
  in-source fragments. The specified <code>featureGroups</code> object is
  automatically converted to an <code>xcmsSet</code> object using
  <code><a href='getXcmsSet.html'>getXcmsSet</a></code>.
    <code>generateComponentsNontarget</code> uses
  <a href='https://cran.r-project.org/web/packages/nontarget/index.html'>the
  nontarget R package</a> to generate components by unsupervised detection of
  homologous series. In the first step the <code>homol.search</code>
  function is used to detect all homologues within each replicate group
  (analyses within each replicate group are averaged prior to detection).
  Then, homologous series across replicate groups are merged in case of full
  overlap or when merging of partial overlapping series causes no conflicts.
    <code>generateComponentsRAMClustR</code> uses
  <a href='https://github.com/cbroeckl/RAMClustR'>RAMClustR</a> to generate
  components from feature groups which follow similar chromatographic
  retention profiles, but are not necessarily restricted to known rules
  (<em>e.g.</em> adducts or isotopes). This method uses the
  <code>ramclustR</code> functions for generating the components, whereas
  <code><a href='http://www.rdocumentation.org/packages/RAMClustR/topics/do.findmain'>do.findmain</a></code> is used for annotation.</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Kuhl, C., Tautenhahn, R., Boettcher, C., Larson, T. R. and Neumann, S. CAMERA: an integrated strategy for compound spectra extraction and annotation of liquid chromatography/mass spectrometry data sets. Analytical Chemistry, 84:283-289 (2012)
    Loos, M., Singer, H. (2017). 
			Nontargeted homologue series extraction from hyphenated high resolution mass spectrometry, 
			Journal of Cheminformatics 9(12), .
    Loos, M., Gerber, C., Corona, F., Hollender, J., Singer, H. (2015). 
			Accelerated isotope fine structure calculation using pruned transition trees, 
			Analytical Chemistry 87(11), 5738-5744.
    C. D. Broeckling, F. A. Afsar, S. Neumann , A. Ben-Hur, and J. E. Prenni: RAMClust: A Novel Feature Clustering Method Enables Spectral-Matching-Based Annotation for Metabolomics Data XCMS: Processing mass spectrometry data for metabolite profiling using nonlinear peak alignment, matching and identification, Analytical Chemistry, 2014, 86 (14), pp 6812–6817
    Broeckling, C. D.; Heuberger, A. L.; Prince, J. A.; Ingelsson, E.; Prenni, J. E.  Assigning precursor–product ion relationships in indiscriminant MS/MS data from non-targeted metabolite profiling studies. Metabolomics 2013, 9, 33-43 (DOI: 10.1007/s11306-012-0426-4).</p>
    

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#references">References</a></li>
          </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Rick Helmus.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
