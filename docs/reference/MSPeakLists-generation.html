<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Generation of MS Peak Lists — MSPeakLists-generation • patRoon</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
<meta property="og:title" content="Generation of MS Peak Lists — MSPeakLists-generation" />

<meta property="og:description" content="Functionality to generate MS peak lists." />
<meta name="twitter:card" content="summary" />
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">patRoon</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/tutorial.html">Tutorial</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/rickhelmus/patRoon">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generation of MS Peak Lists</h1>
    </div>

    
    <p>Functionality to generate MS peak lists.</p>
    

    <pre class="usage"><span class='co'># S4 method for featureGroups</span>
<span class='fu'>generateMSPeakLists</span>(<span class='no'>fGroups</span>, <span class='no'>algorithm</span>, <span class='no'>...</span>)

<span class='fu'>generateDAMSPeakLists</span>(<span class='no'>fGroups</span>, <span class='kw'>bgsubtr</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>maxRtMSWidth</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>clear</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>save</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>MSMSType</span> <span class='kw'>=</span> <span class='st'>"MSMS"</span>)

<span class='fu'>generateDAFMFMSPeakLists</span>(<span class='no'>fGroups</span>)

<span class='fu'>generateMzRPeakLists</span>(<span class='no'>fGroups</span>, <span class='kw'>avgMzWindow</span> <span class='kw'>=</span> <span class='fl'>0.001</span>, <span class='kw'>maxRtMSWidth</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>avgTopPeaks</span> <span class='kw'>=</span> <span class='fl'>50</span>, <span class='kw'>avgMinIntensity</span> <span class='kw'>=</span> <span class='fl'>500</span>, <span class='kw'>avgMassFun</span> <span class='kw'>=</span> <span class='no'>mean</span>,
  <span class='kw'>avgMethod</span> <span class='kw'>=</span> <span class='st'>"distance"</span>, <span class='kw'>precursorMzWindow</span> <span class='kw'>=</span> <span class='fl'>8</span>, <span class='kw'>topMost</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>fGroups</th>
      <td><p>The <code><a href='featureGroups-class.html'>featureGroups</a></code> object from which MS peak
lists should be extracted.</p></td>
    </tr>
    <tr>
      <th>algorithm</th>
      <td><p>A character string describing the algorithm that should be
used: <code>"bruker"</code>, <code>"brukerfmf"</code>, <code>"mzr"</code></p></td>
    </tr>
    <tr>
      <th>&#8230;</th>
      <td><p>Any parameters to be passed to the selected MS peak lists
generation algorithm.</p></td>
    </tr>
    <tr>
      <th>bgsubtr</th>
      <td><p>If <code>TRUE</code> background will be subtracted using the
'spectral' algorithm.</p></td>
    </tr>
    <tr>
      <th>maxRtMSWidth</th>
      <td><p>Maximum total chromatographic peak width (seconds) used
for spectrum averaging. If <code>NULL</code> all spectra from a feature will be
taken into account. Lower to decrease processing time.</p></td>
    </tr>
    <tr>
      <th>clear</th>
      <td><p>Remove any existing chromatogram traces/mass spectra prior to
making new ones.</p></td>
    </tr>
    <tr>
      <th>save</th>
      <td><p>Save data files after completion.</p></td>
    </tr>
    <tr>
      <th>MSMSType</th>
      <td><p>The type of MS/MS experiment performed: <code>"MSMS"</code> for
MRM/AutoMSMS or <code>"BBCID"</code> for broadband CID.</p></td>
    </tr>
    <tr>
      <th>avgMzWindow</th>
      <td><p><em>m/z</em> window (in Da) used for clustering <em>m/z</em>
values when spectra are averaged. Too small windows will prevent clustering
<em>m/z</em> values (thus erroneously creating 'extra' values), whereas too
big windows may cluster unrelated <em>m/z</em> values from different or even
the same spectrum together.</p></td>
    </tr>
    <tr>
      <th>avgTopPeaks</th>
      <td><p>Only retain a maximum number of <code>avgTopPeaks</code> MS
peaks when generating averaged spectra. Lowering this number may exclude
more irrelevant (noisy) MS peaks and decrease processing time, whereas
higher values may avoid excluding lower intense MS peaks that may still be
of interest.</p></td>
    </tr>
    <tr>
      <th>avgMinIntensity</th>
      <td><p>MS peaks with intensities below this value will be
completely excluded (overrides <code>avgTopPeaks</code>).</p></td>
    </tr>
    <tr>
      <th>avgMassFun</th>
      <td><p>Function that is used to calculate average <em>m/z</em>
values.</p></td>
    </tr>
    <tr>
      <th>avgMethod</th>
      <td><p>Method used for producing averaged MS spectra. Valid values
are <code>"hclust"</code>, used for hierarchical clustering, and
<code>"distance"</code>, to use the between peak distance. The latter method
significantly reduces processing time and memory requirements, at the
(potential) cost of slightly reducing accuracy.</p></td>
    </tr>
    <tr>
      <th>precursorMzWindow</th>
      <td><p>The <em>m/z</em> window (in Da) to find MS/MS spectra
of a precursor. This is typically used for Data-Dependent like MS/MS data
and should correspond to the isolation <em>m/z</em> width that was used to
collect the data. For Data-Independent MS/MS experiments, where precursor
ions are not isolated prior to fragmentation (<em>e.g.</em> bbCID, MSe,
all-ion, ...) the value should be <code>NULL</code>.</p></td>
    </tr>
    <tr>
      <th>topMost</th>
      <td><p>Only extract MS peak lists from a maximum of <code>topMost</code>
analyses with highest intensity. If <code>NULL</code> all analyses will be used.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code><a href='MSPeakLists-class.html'>MSPeakLists</a></code> object that can be used for formulae
  calculation and compound identification.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Formula calculation and identification tools rely on mass spectra that belong
to features of interest. For processing, MS (and MS/MS) spectra are typically
reduced to a table with a column containing measured <em>m/z</em> values and a
column containing their intensities. These 'MS peak lists' can then be used
for <a href='formula-generation.html'>formula generation</a> and
<a href='compound-generation.html'>compound generation</a>. By default, peak lists are
generated from all analyses containing a particular feature group. The main
advantage is that this will allow subsequent processes (at the moment only
formulae calculation) to generate a consensus from feature group data
originating from multiple analyses. Nevertheless, it might be useful to limit
to maximum amount of analyses (<code>topMost</code> parameter) to signficantly
reduce the processing time required for MS peak list extraction.</p>
<p>Several functions exist to automatically extract MS peak lists for feature
groups.</p>
<p><code>generateMSPeakLists</code> is a generic function that will generate MS peak lists
  using one of the supported algorithms. The actual functionality is provided
  by algorithm specific functions such as <code>generateFormulasDA</code> and
  <code>generateFormulasGenForm</code>. While these functions may be called directly,
  <code>generateMSPeakLists</code> provides a generic interface and is therefore usually
  preferred.</p>
<p><code>generateDAMSPeakLists</code> uses Bruker DataAnalysis to generate MS
  peak lists. Naturally, this only works with analyses in the Bruker data
  format (<code class="file">.d</code>). This function leverages DataAnalysis functionality to
  support averaging of spectra, background subtraction and identification of
  isotopes. In order to obtain mass spectra TICs will be added of the MS and
  relevant MS/MS signals.</p>
<p><code>generateDAFMFMSPeakLists</code> is similar to <code>generateDAMSPeakLists</code>,
  but uses compounds that were generated by the Find Molecular Features (FMF)
  algorithm to extract MS peak lists. This is generally much faster than
  <code>generateDAMSPeakLists</code>, however, it only works when features were obtained
  using the <code><a href='feature-finding.html'>findFeaturesBruker</a></code> function. Since all MS spectra
  are generated in advance by Bruker DataAnalysis, no further parameters
  exist to customize its operation.</p>
<p><code>generateMzRPeakLists</code> uses the <span class="pkg">mzR</span> package to
  extract MS peak lists. For this analyses should be either in <code class="file">.mzXML</code>
  or <code class="file">.mzML</code> format. This function can optionally average multiple
  spectra over a chromatgraphic peak to improve accuracy.</p>
    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p><code>generateDAMSPeakLists</code> requires that the <span class="option">Component</span>
  column is active (Method--&gt;Parameters--&gt;Layouts--&gt;Mass List Layout).</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Averaging of mass spectra algorithms used by
  <code>generateMzRPeakLists</code> were based on the
  <a href='https://github.com/zeehio/msProcess'>msProcess</a> R package (now
  archived on CRAN). 
  A cross-platform toolkit for mass spectrometry and proteomics Chambers, Matthew C. and Maclean, Brendan and Burke, Robert and Amodei, 
		 Dario and Ruderman, Daniel L. and Neumann, Steffen and Gatto, Laurent and 
		 Fischer, Bernd and Pratt, Brian and Egertson, Jarrett and Hoff, Katherine 
		 and Kessner, Darren and Tasman, Natalie and Shulman, Nicholas and Frewen, 
		 Barbara and Baker, Tahmina A. and Brusniak, Mi-Youn and Paulse, Christopher 
		 and Creasy, David and Flashner, Lisa and Kani, Kian and Moulding, Chris and 
		 Seymour, Sean L. and Nuwaysir, Lydia M. and Lefebvre, Brent and Kuhlmann, 
		 Frank and Roark, Joe and Rainer, Paape and Detlev, Suckau and Hemenway, 
		 Tina and Huhmer, Andreas and Langridge, James and Connolly, Brian and Chadick, 
		 Trey and Holly, Krisztina and Eckels, Josh and Deutsch, Eric W. and Moritz, 
		 Robert L. and Katz, Jonathan E. and Agus, David B. and MacCoss, Michael and 
		 Tabb, David L. and Mallick, Parag Nat Biotechnol. 2012 NOct;30(10):918-920.
    Mol Cell Proteomics. 2010 Aug 17. mzML - a Community Standard for Mass Spectrometry Data. Martens L, Chambers M, Sturm M, Kessner D, Levander F, Shofstahl J, Tang WH, Rompp A, Neumann S,  Pizarro AD, Montecchi-Palazzi L, Tasman N, Coleman M, Reisinger F, Souda P,  Hermjakob H, Binz PA, Deutsch EW.
    Nat Biotechnol. 2004 Nov;22(11):1459-66. A common open representation of mass spectrometry data and its application to proteomics research. Pedrioli PG, Eng JK, Hubley R, Vogelzang M, Deutsch EW, Raught B, Pratt B, Nilsson E, Angeletti RH, Apweiler R, Cheung K, Costello CE, Hermjakob H, Huang S, Julian RK, Kapp E, McComb ME, Oliver SG,  Omenn G, Paton NW, Simpson R, Smith R, Taylor CF, Zhu W, Aebersold R.
    Mol Syst Biol. 2005;1:2005.0017. Epub 2005 Aug 2. A uniform proteomics MS/MS analysis platform utilizing open XML file formats. Keller A, Eng J, Zhang N, Li XJ, Aebersold R.
    Bioinformatics. 2008 Nov 1;24(21):2534-6. Epub 2008 Jul 7. ProteoWizard: open source software for rapid proteomics tools development. Kessner D, Chambers M, Burke R, Agus D, Mallick P.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='MSPeakLists-class.html'>MSPeakLists-class</a></code></p>
    

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#note">Note</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
          </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Rick Helmus.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>

