<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Finding features — feature-finding • patRoon</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
<meta property="og:title" content="Finding features — feature-finding" />

<meta property="og:description" content="Functions and classes for collection of features." />
<meta name="twitter:card" content="summary" />
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">patRoon</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/tutorial.html">Tutorial</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/rickhelmus/patRoon">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Finding features</h1>
    </div>

    
    <p>Functions and classes for collection of features.</p>
    

    <pre class="usage"><span class='fu'>findFeatures</span>(<span class='no'>analysisInfo</span>, <span class='no'>algorithm</span>, <span class='no'>...</span>)

<span class='fu'>findFeaturesBruker</span>(<span class='no'>analysisInfo</span>, <span class='kw'>doFMF</span> <span class='kw'>=</span> <span class='st'>"auto"</span>, <span class='kw'>startRange</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>endRange</span> <span class='kw'>=</span> <span class='fl'>0</span>)

<span class='fu'>findFeaturesEnviPick</span>(<span class='no'>analysisInfo</span>, <span class='no'>...</span>)

<span class='fu'>importFeaturesEnviMass</span>(<span class='no'>analysisInfo</span>, <span class='no'>enviProjPath</span>)

<span class='fu'>findFeaturesOpenMS</span>(<span class='no'>analysisInfo</span>, <span class='kw'>thr</span> <span class='kw'>=</span> <span class='fl'>1000</span>, <span class='kw'>comfwhm</span> <span class='kw'>=</span> <span class='fl'>5</span>, <span class='kw'>minfwhm</span> <span class='kw'>=</span> <span class='fl'>3</span>,
  <span class='kw'>maxfwhm</span> <span class='kw'>=</span> <span class='fl'>60</span>, <span class='kw'>minlength</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>maxlength</span> <span class='kw'>=</span> -<span class='fl'>1</span>, <span class='kw'>mzppm</span> <span class='kw'>=</span> <span class='fl'>10</span>,
  <span class='kw'>extraOpts</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>logPath</span> <span class='kw'>=</span> <span class='fu'>file.path</span>(<span class='st'>"log"</span>, <span class='st'>"openms"</span>),
  <span class='kw'>maxProcAmount</span> <span class='kw'>=</span> <span class='fu'>getOption</span>(<span class='st'>"patRoon.maxProcAmount"</span>))

<span class='fu'>findFeaturesXCMS</span>(<span class='no'>analysisInfo</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"centWave"</span>, <span class='no'>...</span>)

<span class='fu'>importFeaturesXCMS</span>(<span class='no'>xs</span>, <span class='no'>analysisInfo</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>analysisInfo</th>
      <td><p><a href='analysis-information.html'>Analysis info table</a>.</p></td>
    </tr>
    <tr>
      <th>algorithm</th>
      <td><p>A character string describing the algorithm that should be
used: <code>"bruker"</code>, <code>"openms"</code>, <code>"xcms"</code>, <code>"envipick"</code></p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>further parameters passed to <code><a href='http://www.rdocumentation.org/packages/xcms/topics/xcmsSet'>xcmsSet</a></code>
(<code>findFeaturesXCMS</code>), <code><a href='http://www.rdocumentation.org/packages/enviPick/topics/enviPickwrap'>enviPickwrap</a></code>
(<code>featurefinderEnviPick</code>) or to selected feature finding algorithms
(<code>findFeatures</code>).</p></td>
    </tr>
    <tr>
      <th>doFMF</th>
      <td><p>Run the 'Find Molecular Features' algorithm before loading
compounds. Valid options are: <code>TRUE</code> (always), <code>FALSE</code> (never)
and <code>"auto"</code> (automatically if no compounds present).</p></td>
    </tr>
    <tr>
      <th>startRange, endRange</th>
      <td><p>Start/End retention range (seconds) from which to
collect features. A 0 (zero) for codeendRange marks the end of the
analysis.</p></td>
    </tr>
    <tr>
      <th>enviProjPath</th>
      <td><p>The path of the enviMass project.</p></td>
    </tr>
    <tr>
      <th>thr</th>
      <td><p>Noise intensity threshold. Sets
<code>algorithm:common:noise_threshold_int</code> option.</p></td>
    </tr>
    <tr>
      <th>comfwhm, minfwhm, maxfwhm</th>
      <td><p>Expected/Minimal/Maximal chromatographic peak
width (seconds). Sets <code>algorithm:common:chrom_fwhm</code>,
<code>algorithm:epd:min_fwhm</code> and <code>algorithm:epd:max_fwhm</code>,
respectively.</p></td>
    </tr>
    <tr>
      <th>minlength, maxlength</th>
      <td><p>Minimum/Maximum length of mass trace (seconds).
Set negative value for maxlength to disable maximum. Sets
<code>algorithm:mtd:min_trace_length</code> and
<code>algorithm:mtd:min_trace_length</code>, respectively.</p></td>
    </tr>
    <tr>
      <th>mzppm</th>
      <td><p>Allowed mass deviation (ppm) for trace detection. Sets
<code>algorithm:mtd:mass_error_ppm</code>.</p></td>
    </tr>
    <tr>
      <th>extraOpts</th>
      <td><p>Named character <code>vector</code> containing extra options that
will be passed to <code>FeatureFinderMetabo</code>. Any options specified here
will override any of the above.</p></td>
    </tr>
    <tr>
      <th>logPath</th>
      <td><p>Destination directory for log files with output from executed
commands. Will be created if non-existant. Set to <code>NULL</code> to disable
logging.</p></td>
    </tr>
    <tr>
      <th>maxProcAmount</th>
      <td><p>Maximum number of processes to run for parallelization.
Usually a number close to the amount of physical cores yields most
efficient results.</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>The method setting used by XCMS peak finding, see
<code><a href='http://www.rdocumentation.org/packages/xcms/topics/findPeaks-methods'>xcms::findPeaks</a></code></p></td>
    </tr>
    <tr>
      <th>xs</th>
      <td><p>An <code>xcmsSet</code> object.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of a class which is derived from <code><a href='features-class.html'>features</a></code>.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Several functions exist to collect features (<em>i.e.</em> retention and MS
information that represent potential compounds) from a set of analyses. All
'feature finders' return an object derived from the <code><a href='features-class.html'>features</a></code>
base class. The next step in a general workflow is to group and align these
features across analyses by <a href='feature-grouping.html'>feature groupers</a>. Note
that some feature finders have a plethora of options which sometimes may have
a large effect on the quality of results. Fine-tuning parameters is therefore
important, and the optimum is largely dependent upon applied analysis
methodology and instrumentation.</p>
<p><code>findFeatures</code> is a generic function that will find features
  using one of the supported algorithms. The actual functionality is provided
  by algorithm specific functions such as <code>findFeaturesOpenMS</code> and
  <code>findFeaturesBruker</code>. While these functions may be called directly,
  <code>findFeatures</code> provides a generic interface and is therefore usually
  preferred.</p>
<p><code>findFeaturesBruker</code> uses the 'Find Molecular Features' (FMF)
  algorithm of Bruker DataAnalysis vendor software to find features. The
  resulting 'compounds' are then transferred from DataAnalysis and stored as
  features.</p>
<p><code>findFeaturesEnviPick</code> uses the
  <code><a href='http://www.rdocumentation.org/packages/enviPick/topics/enviPickwrap'>enviPickwrap</a></code>. function from the <span class="pkg">enviPick</span> R
  package to extract features.</p>
<p><code>importFeaturesEnviMass</code> imports features from a project
  generated by the <span class="pkg">enviMass</span> package.</p>
<p><code>findFeaturesOpenMS</code> uses the
  <a href='http://ftp.mi.fu-berlin.de/pub/OpenMS/release2.1.0-documentation/html/TOPP_FeatureFinderMetabo.html'>FeatureFinderMetabo</a>
   TOPP tool (see <a href='http://www.openms.de'>http://www.openms.de</a>).</p>
<p><code>findFeaturesXCMS</code> uses the <code><a href='http://www.rdocumentation.org/packages/xcms/topics/xcmsSet'>xcmsSet</a></code>
  function from the <span class="pkg">xcms</span> package to find features.</p>
<p><code>importFeaturesXCMS</code> converts features from an existing
  <code>xcmsSet</code> object (obtained with the <span class="pkg">xcms</span> package)
  to a new <code><a href='features-class.html'>features</a></code> object.</p>
    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p><code>findFeaturesBruker</code> only works with Bruker data files (<code>.d</code>
  extension) and requires Bruker DataAnalysis and the
  <span class="pkg">RDCOMClient</span> package to be installed.</p>
<p><code>findFeaturesEnviPick</code> Requires analysis files to be in the
  <code>mzXML</code> format.</p>
<p>The file format of analyses for <code>findFeaturesOpenMS</code> must be
  <code class="file">mzML</code>. This functionality has been tested with OpenMS version &gt;= 2.0.
  Please make sure it is installed and its binaries are added to the PATH
  environment variable or the <code>patRoon.path.OpenMS</code> option is set.</p>
<p>The file format of analyses for <code>findFeaturesXCMS</code> must be
  <code>mzML</code> or <code>mzXML</code>.</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Rost HL, Sachsenberg T, Aiche S, Bielow C, Weisser H, Aicheler F, Andreotti S, Ehrlich H, Gutenbrunner P, Kenar E, Liang X, Nahnsen S, Nilse L, Pfeuffer J, Rosenberger G, Rurik M, Schmitt U, Veit J, Walzer M, Wojnar D, Wolski WE, Schilling O, Choudhary JS, Malmstrom L, Aebersold R, Reinert K and Kohlbacher O (2016).
&#8220;OpenMS: a flexible open-source software platform for mass spectrometry data analysis.&#8221;
<em>Nature Methods</em>, <b>13</b>(9), pp. 741--748.
doi: <a href='http://doi.org/10.1038/nmeth.3959'>10.1038/nmeth.3959</a>
.</p>
<p>Smith, C.A. and Want, E.J. and O'Maille, G. and Abagyan,R. and Siuzdak, G.: XCMS: Processing mass spectrometry data for metabolite profiling using nonlinear peak alignment, matching and identification, Analytical Chemistry, 78:779-787 (2006)
    Ralf Tautenhahn, Christoph Boettcher, Steffen Neumann: Highly sensitive feature detection for high resolution LC/MS BMC Bioinformatics, 9:504 (2008)
    H. Paul Benton, Elizabeth J. Want and Timothy M. D. Ebbels Correction of mass calibration gaps in liquid chromatography-mass spectrometry metabolomics data Bioinformatics, 26:2488 (2010)</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='features-class.html'>features-class</a></code> and <code><a href='analysis-information.html'>analysis-information</a></code></p>
    

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#note">Note</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
          </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Rick Helmus.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>

